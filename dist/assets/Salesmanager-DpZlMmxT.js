import{j as e,a as d,_ as s,r as p}from"./index-IHVC6umS.js";import{u as b}from"./index.esm-DFVk_A6q.js";function N({name:c,id:l}){const{register:m,handleSubmit:u,reset:i,formState:{errors:x}}=b(),{register:h,handleSubmit:r,reset:t,formState:{errors:g}}=b(),j=async()=>{try{const a=await d.delete(`/api/v1/sm/smdeletelabour?labour_id=${l}`,{withCredentials:!0});s.success("Labour deleted successfully")}catch(a){s.error(a.response.data.message)}},f=async a=>{const n={labourid:l,outtime:a.outtime};try{const o=await d.put("/api/v1/sm/labourouttime",n,{withCredentials:!0});t(),s.success("outtime updated successfully")}catch(o){s.error(o.response.data.message)}},y=async a=>{const n={labourid:l,intime:a.intime};console.log("ininfo",n);try{const o=await d.put("/api/v1/sm/labourintime",n,{withCredentials:!0});i(),s.success("intime updated successfully")}catch(o){s.error(o.response.data.message)}};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"border flex justify-between shadow-md rounded px-2 py-1",children:[e.jsxs("p",{children:["Name:",c]}),e.jsxs("div",{className:"flex gap-6",children:[e.jsx("button",{className:"bg-red-700 rounded px-1 text-white",onClick:()=>document.getElementById("my_modal_4").showModal(),children:"update intime"}),e.jsx("dialog",{id:"my_modal_4",className:"modal",children:e.jsxs("div",{className:"modal-box bg-white",children:[e.jsx("form",{method:"dialog",children:e.jsx("button",{className:"btn btn-sm btn-circle btn-ghost absolute right-2 top-2",children:"✕"})}),e.jsx("h3",{className:"font-bold text-lg",children:"Provide intime year-month"}),e.jsxs("form",{onSubmit:u(y),className:" flex flex-col gap-6  mt-6",children:[e.jsxs("div",{children:[e.jsx("input",{type:"text",className:"border w-full p-3 rounded-;g",placeholder:"yyyy-mm",...m("intime",{required:!0})}),x.intime&&e.jsx("span",{className:"text-sm text-red-600",children:"This field is required"})]}),e.jsx("button",{onClick:()=>document.getElementById("my_modal_4").close(),type:"submit",className:"bg-red-500 py-1 px-4 rounded text-xl text-white",children:"update"})]})]})}),e.jsx("button",{className:"bg-red-700 rounded px-1 text-white",onClick:()=>document.getElementById("newmodal").showModal(),children:"update outtime"}),e.jsx("dialog",{id:"newmodal",className:"modal",children:e.jsxs("div",{className:"modal-box bg-white",children:[e.jsx("form",{method:"dialog",children:e.jsx("button",{className:"btn btn-sm btn-circle btn-ghost absolute right-2 top-2",children:"✕"})}),e.jsx("h3",{className:"font-bold text-lg",children:"Provide outtime year-month"}),e.jsxs("form",{onSubmit:r(f),className:" flex flex-col gap-6  mt-6",children:[e.jsxs("div",{children:[e.jsx("input",{type:"text",className:"border w-full p-3 rounded-;g",placeholder:"yyyy-mm",...h("outtime",{required:!0})}),g.outtime&&e.jsx("span",{className:"text-sm text-red-600",children:"This field is required"})]}),e.jsx("button",{onClick:()=>document.getElementById("newmodal").close(),type:"submit",className:"bg-red-500 py-1 px-4 rounded text-xl text-white",children:"update"})]})]})}),e.jsx("button",{onClick:j,className:"bg-red-700 flex justify-center items-center rounded px-1 text-white",children:e.jsx("ion-icon",{name:"trash-outline"})})]})]})})}function S(){const{register:c,handleSubmit:l,reset:m,formState:{errors:u}}=b(),[i,x]=p.useState([]),h=async r=>{try{const t=await d.post("/api/v1/sm/addlabour",r,{withCredentials:!0});m(),s.success("New labour created successfully")}catch(t){s.error(t.response.data.message)}};return p.useEffect(()=>{(async()=>{try{const t=await d.get("/api/v1/sm/smgetlabour",{withCredentials:!0});x(t.data.labours),s.success("Data fetched successfully for Salesmanager")}catch(t){s.error(t.response.data.message)}})()},[]),e.jsx(e.Fragment,{children:e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-center px-6 py-2  shadow-lg",children:[e.jsx("button",{className:"bg-red-500 text-white px-2 py-1 rounded-md",onClick:()=>document.getElementById("my_modal_2").showModal(),children:"add labour"}),e.jsx("dialog",{id:"my_modal_2",className:"modal",children:e.jsxs("div",{className:"modal-box bg-white",children:[e.jsx("form",{method:"dialog",children:e.jsx("button",{className:"btn btn-sm btn-circle btn-ghost absolute right-2 top-2",children:"✕"})}),e.jsx("h3",{className:"font-bold text-lg",children:"Provide labour name"}),e.jsxs("form",{onSubmit:l(h),className:" flex flex-col gap-6  mt-6",children:[e.jsxs("div",{children:[e.jsx("input",{type:"text",className:"border w-full p-3 rounded-;g",placeholder:"name",...c("name",{required:!0})}),u.name&&e.jsx("span",{className:"text-sm text-red-600",children:"This field is required"})]}),e.jsx("button",{onClick:()=>document.getElementById("my_modal_2").close(),type:"submit",className:"bg-red-500 py-1 px-4 rounded text-xl text-white",children:"add"})]})]})})]}),e.jsxs("div",{className:"px-4 mt-6",children:[e.jsx("p",{className:"text-xl underline font-semibold mb-4",children:"Get Labours"}),i.length>0?e.jsx("div",{className:"grid grid-cols-1 grid-flow-row gap-4",children:i.map(({name:r,_id:t})=>e.jsx("div",{children:e.jsx(N,{name:r,id:t})},t))}):e.jsx("div",{children:"Data is not present here:"})]})]})})}export{S as default};
