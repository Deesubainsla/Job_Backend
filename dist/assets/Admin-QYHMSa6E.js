import{j as e,a as n,_ as i,r as c}from"./index-5u25mgSA.js";import{u as w}from"./index.esm-DhqxH0bK.js";function N({sm:r,labour:d,location:t}){return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"border shadow-md rounded px-2 py-1",children:[e.jsxs("p",{children:["salesmanager:",r]}),e.jsxs("p",{children:["labour:",d]}),e.jsxs("p",{children:["location:",t]})]})})}function h({name:r,id:d,issalesmanager:t}){const o=async()=>{try{if(t){console.log("inif",t);const l=await n.delete(`/api/v1/admin/deletesalesmanager?userid=${d}`,{withCredentials:!0});i.success("Salesmanager deleted successfully")}else{console.log("ifelse",t);const l=await n.delete(`/api/v1/admin/deletelabour?userid=${d}`,{withCredentials:!0});i.success("Labour deleted successfully")}}catch(l){i.error(l.response.data.message),console.log("Error",l.message)}};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"border flex justify-between shadow-md rounded px-2 py-1",children:[e.jsxs("p",{children:["Name:",r]}),e.jsx("button",{onClick:o,className:"bg-red-700 flex justify-center items-center rounded px-1 text-white",children:e.jsx("ion-icon",{name:"trash-outline"})})]})})}function S(){const{register:r,handleSubmit:d,reset:t,formState:{errors:o}}=w(),[l,p]=c.useState([]),[u,g]=c.useState([]),[x,j]=c.useState([]),f=async a=>{try{const s=n.post("/api/v1/admin/makesalesmanager",a,{withCredentials:!0});i.success("Salesmanager added successfully"),t()}catch(s){i.error(s.response.data.message)}};return c.useEffect(()=>{(async()=>{try{const a=await n.get("/api/v1/admin/getlocation",{withCredentials:!0}),s=await n.get("/api/v1/admin/getsalesmanagers",{withCredentials:!0}),m=await n.get("/api/v1/admin/getlabours",{withCredentials:!0});p(a.data.location),g(s.data.salesmanagers),j(m.data.labours),i.success("Data fetched successfully for Admin")}catch(a){console.log("Error:",a.message)}})()},[]),e.jsx(e.Fragment,{children:e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-center px-6 py-2  shadow-lg",children:[e.jsx("button",{className:"bg-red-500 text-white px-2 py-1 rounded-md",onClick:()=>document.getElementById("my_modal_3").showModal(),children:"add salesmanager"}),e.jsx("dialog",{id:"my_modal_3",className:"modal",children:e.jsxs("div",{className:"modal-box bg-white",children:[e.jsx("form",{method:"dialog",children:e.jsx("button",{className:"btn btn-sm btn-circle btn-ghost absolute right-2 top-2",children:"âœ•"})}),e.jsx("h3",{className:"font-bold text-lg",children:"Provide salesmanager information"}),e.jsxs("form",{onSubmit:d(f),className:" flex flex-col gap-6  mt-6",children:[e.jsxs("div",{children:[e.jsx("input",{type:"text",className:"border w-full p-3 rounded-;g",placeholder:"Username",...r("username",{required:!0})}),o.username&&e.jsx("span",{className:"text-sm text-red-600",children:"This field is required"})]}),e.jsxs("div",{className:"",children:[e.jsx("input",{type:"password",className:"border w-full  p-3 rounded-;g",placeholder:"password",...r("password",{required:!0})}),o.password&&e.jsx("span",{className:"text-sm text-red-600",children:"This field is required"})]}),e.jsxs("div",{className:"",children:[e.jsx("input",{type:"text",className:"border w-full p-3 rounded-;g",placeholder:"location",...r("location",{required:!0})}),o.location&&e.jsx("span",{className:"text-sm text-red-600",children:"This field is required"})]}),e.jsx("button",{onClick:()=>document.getElementById("my_modal_3").close(),type:"submit",className:"bg-red-500 py-1 px-4 rounded text-xl text-white",children:"add"})]})]})})]}),e.jsxs("div",{className:"px-4 mt-6",children:[e.jsx("p",{className:"text-xl underline font-semibold mb-4",children:"Salesmanager and labours location"}),l.length>0?e.jsx("div",{className:"grid grid-cols-4 grid-flow-row gap-4",children:l.map(({salesmanager:a,labour:s,location:m},b)=>e.jsx("div",{children:e.jsx(N,{sm:a,labour:s,location:m})},b))}):e.jsx("div",{children:"Data is not present here:"})]}),e.jsxs("div",{className:"px-4 mt-6",children:[e.jsx("p",{className:"text-xl underline font-semibold mb-4",children:"Get Salesmanagers"}),u.length>0?e.jsx("div",{className:"grid grid-cols-4 grid-flow-row gap-4",children:u.map(({username:a,_id:s})=>e.jsx("div",{children:e.jsx(h,{name:a,id:s,issalesmanager:!0})},s))}):e.jsx("div",{children:"Data is not present here:"})]}),e.jsxs("div",{className:"px-4 mt-6",children:[e.jsx("p",{className:"text-xl underline font-semibold mb-4",children:"Get Labours"}),x.length>0?e.jsx("div",{className:"grid grid-cols-4 grid-flow-row gap-4",children:x.map(({name:a,_id:s})=>e.jsx("div",{children:e.jsx(h,{name:a,id:s,issalesmanager:!1})},s))}):e.jsx("div",{children:"Data is not present here:"})]})]})})}export{S as default};
